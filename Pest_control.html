<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="./Tab_logo.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Pest Control - 360 Quotes</title>
  <style>
    /* Custom focus state to match standard form behavior */
    input:focus, select:focus {
      outline: 2px solid #0685B1;
      border-color: transparent;
    }
  </style>
</head>
<body class="bg-white font-sans text-gray-700">

  <header class=" pt-16 text-center">
    <div id="navbar"></div>
    <h1 class="text-4xl font-bold text-[#0685B1] mt-[50px]">Pest Control</h1>
  </header>

  <main class="max-w-4xl mx-auto px-6 py-8">
    <form id="contactForm" action="#" method="post" novalidate class="space-y-4">
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <input type="text" id="first_name" name="first_name" required placeholder="First Name" 
          class="w-full border border-gray-300 p-3 rounded shadow-sm focus:ring-0">
        
        <input type="text" id="last_name" name="last_name" required placeholder="Last Name" 
          class="w-full border border-gray-300 p-3 rounded shadow-sm focus:ring-0">

        <input type="text" id="Address" name="Address" required placeholder="Address" 
          class="w-full border border-gray-300 p-3 rounded shadow-sm focus:ring-0">

        <input type="text" id="City" name="City" required placeholder="City" 
          class="w-full border border-gray-300 p-3 rounded shadow-sm focus:ring-0">

        <select id="reason" name="reason" 
          class="w-full border border-gray-300 p-3 rounded shadow-sm focus:ring-0 bg-white">
          <option value="">Select State</option>
          <option value="California">California</option>
          <option value="usa">Usa</option>
        </select>

        <input type="text" id="zipcode" name="zipcode" pattern="^\d{5}(-\d{4})?$" required placeholder="Zip Code" 
          class="w-full border border-gray-300 p-3 rounded shadow-sm focus:ring-0">

        <input type="tel" id="phone" name="phone" pattern="[0-9+\-() ]{7,}" placeholder="Phone Number" 
          class="w-full border border-gray-300 p-3 rounded shadow-sm focus:ring-0">

        <input type="email" id="email" name="email" required placeholder="E-mail" 
          class="w-full border border-gray-300 p-3 rounded shadow-sm focus:ring-0">
      </div>

      <div class="flex items-start gap-3 mt-6 text-xs text-gray-500 leading-relaxed">
        <input type="checkbox" id="subscribe" name="subscribe" value="yes" class="mt-1 h-4 w-4 rounded border-gray-300">
        <label for="subscribe">
          By clicking Submit, I agree to the <a href="/Terms_of_Service.html" class="text-[#0685B1] underline">Terms Of Service</a> and 
          <a href="/Privacy_Policy.html" class="text-[#0685B1] underline">Privacy Policy</a> and authorize Pest control Companies and their agents and marketing 
          partners to contact me about Pest Control and other non-insurance offers by telephone calls and text messages to the number I provided 
          above. I agree to receive telemarketing calls and pre-recorded messages via an autodialed phone system, even if my telephone number is a 
          mobile number that is currently listed on any state, federal or corporate “Do Not Call” list. I understand that I may revoke my consent at any time 
          and that my consent is not a condition of purchase of any goods or services and that standard message and data rates may apply for California Residents.
        </label>
      </div>

      <div class="pt-4">
        <button type="submit" 
          class="w-full bg-[#0685B1] hover:bg-[#056a8c] text-white font-bold py-4 rounded transition-colors text-xl">
          Submit
        </button>
      </div>
    </form>

    <div id="result" aria-live="polite" class="mt-4 text-center font-medium"></div>
  </main>
  <div id="footer"></div>

  <script>
    document.getElementById('contactForm').addEventListener('submit', async function(e){
  e.preventDefault();
  if (!this.reportValidity()) return;

  // Ensure TrustedForm field exists
  const tfField = document.querySelector("input[name='xxTrustedFormCertUrl']");
  if (!tfField || !tfField.value) {
    console.warn("TrustedForm certificate not yet available");
  }

  const data = new FormData(this);
  const payload = Object.fromEntries(data.entries());

  try {
    const response = await fetch("https://three60quotesbackend.onrender.com/pestControl/submit", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });

    const resultDiv = document.getElementById('result');
    if (response.ok) {
      resultDiv.textContent = "Form submitted successfully!";
      resultDiv.className = "mt-4 text-center font-medium text-green-600";
    } else {
      resultDiv.textContent = "Failed to submit form.";
      resultDiv.className = "mt-4 text-center font-medium text-red-600";
    }
  } catch (error) {
    document.getElementById('result').textContent = "Error connecting to server.";
  }
});

    // TrustedForm Script
    (function() {
      var tf = document.createElement('script');
      tf.type = 'text/javascript'; tf.async = true;
      tf.src = "https://api.trustedform.com/trustedform.js?field=xxTrustedFormCertUrl&use_tagged_consent=true&l=" + new Date().getTime() + Math.random();
      var s = document.getElementsByTagName('script')[0]; 
      s.parentNode.insertBefore(tf, s);
    })();

    // Navbar Script
    fetch("Navbar.html")
      .then(response => response.text())
      .then(data => { document.getElementById("navbar").innerHTML = data; });
  </script>
  <script>
    fetch("Footer.html")
      .then(response => response.text())
      .then(data => { document.getElementById("footer").innerHTML = data; });
  </script>
  <noscript><img src='https://api.trustedform.com/ns.gif' /></noscript>
</body>
</html>